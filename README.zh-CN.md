<!-- è¯­è¨€åˆ‡æ¢ | Language Switcher -->
<p align="right">
  <a href="./README.md">English</a> Â· <b>ç®€ä½“ä¸­æ–‡</b>
</p>

<!-- Banner -->
<p align="center">
  <img src="./public/slogan.jpg" alt="Studify â€” Your Tutor, Anytime. Anywhere" />
</p>

<!-- Typing SVG -->
<p align="center">
  <a href="https://git.io/typing-svg">
    <img src="https://readme-typing-svg.demolab.com?font=Fira+Code&pause=1000&color=FF7A45&width=700&lines=æ¬¢è¿æ¥åˆ°+Studify!;AI+é©±åŠ¨çš„å­¦ä¹ åŠ©æ‰‹;Next.js+%2B+Supabase+%2B+LangChain;è¯¾ç¨‹%2Fæ•™å®¤%2Fç¤¾åŒº+å…¨æ ˆå¹³å°" alt="Typing SVG" />
  </a>
</p>

<!-- Badges -->
<p align="center">
  <img src="https://img.shields.io/badge/Next.js-15.5-black?logo=next.js" />
  <img src="https://img.shields.io/badge/Supabase-Postgres-green?logo=supabase" />
  <img src="https://img.shields.io/badge/Upstash-Redis-red?logo=redis" />
  <img src="https://img.shields.io/badge/Stripe-Payments-blue?logo=stripe" />
  <img src="https://img.shields.io/badge/AI-LangChain-orange?logo=openai" />
  <img src="https://img.shields.io/badge/OneSignal-Push%20Notifications-critical?logo=onesignal" />
  <img src="https://img.shields.io/badge/QStash-Queue-00AA88?logo=icloud" />
</p>

<p align="center">
  <img src="https://raw.githubusercontent.com/andreasbm/readme/master/assets/lines/rainbow.png" alt="divider" />
</p>

# Studify ğŸ“ AI å­¦ä¹ å¹³å°

Studify æ˜¯ä¸€ä¸ªé¢å‘å­¦ç”Ÿä¸å¯¼å¸ˆçš„ AI å­¦ä¹ å¹³å°ï¼Œé›†æˆäº†è¯¾ç¨‹ç³»ç»Ÿã€æ•™å®¤ç³»ç»Ÿã€ç¤¾åŒºç³»ç»Ÿä¸ AI èƒ½åŠ›ï¼ˆRAG æœç´¢ã€è¯­ä¹‰æ£€ç´¢ã€å­¦ä¹ è·¯å¾„ã€è§†é¢‘è½¬å†™ä¸é—®ç­”ã€ä¸ªæ€§åŒ–æ¨èç­‰ï¼‰ï¼Œæä¾›ä»å­¦ä¹ åˆ°åˆ›ä½œã€ä»äº’åŠ¨åˆ°æ”¯ä»˜çš„å®Œæ•´é—­ç¯ä½“éªŒã€‚

## **1. Track & Problem Statement**

### Competition:
**Codenection 2025 Hackathon**

### Track:
**Student Lifestyle** â†’ *Tutoring for Students*

### Problem Statement:
Many students struggle with academic challenges, including difficulty understanding course material, limited access to personalized help, and inefficient study habits. Traditional tutoring services are often expensive, inconvenient, or unavailable outside fixed hours, leaving students without adequate support when they need it most.

### Goal:
Develop a **tutoring platform** that provides **on-demand, affordable, and personalized academic assistance**. The platform connects students with tutors, offers interactive learning tools, and provides curated study resources to improve academic outcomes and boost student confidence.

## æŠ€æœ¯æ ˆ

<p>
  <img src="https://skillicons.dev/icons?i=nextjs,react,ts,tailwind,vercel,nodejs,supabase,postgres,redis,git,github" height="32" />
</p>

- **å‰ç«¯**ï¼šNext.js 15ã€React 19ã€TypeScriptã€TailwindCSSã€shadcn/uiã€Framer Motion
- **åç«¯**ï¼šSupabaseï¼ˆAuth/DB/Storageï¼‰ã€Upstash Redisã€QStash é˜Ÿåˆ—
- **AI**ï¼šLangChainã€OpenRouterã€HuggingFace Whisperã€Mermaid å¯è§†åŒ–
- **æ”¯ä»˜**ï¼šStripeï¼ˆCheckoutã€Connectã€Webhookï¼‰
- **é€šçŸ¥**ï¼šOneSignal Web Push
- **i18n**ï¼šnext-intl

## æˆªå›¾/æ¼”ç¤º

<p>
  <img src="./public/homepagess.png" alt="Dashboard" />
</p>

## åŠŸèƒ½æ€»è§ˆ

- **è¯¾ç¨‹ç³»ç»Ÿ**ï¼šè¯¾ç¨‹/æ¨¡å—/è¯¾æ—¶ã€å­¦ä¹ è¿›åº¦ã€æµ‹éªŒã€ç¬”è®°ã€è´­ä¹°ä¸æ”¯ä»˜
- **æ•™å®¤ç³»ç»Ÿ**ï¼šç­çº§/æˆå‘˜ã€ä½œä¸šã€ç›´æ’­ã€å‡ºå‹¤ã€ç™½æ¿åä½œ
- **ç¤¾åŒºç³»ç»Ÿ**ï¼šç¾¤ç»„ã€å¸–å­ã€è¯„è®ºã€ååº”ã€æˆå°±ä¸ç­¾åˆ°
- **AI èƒ½åŠ›**ï¼šåŒæ¨¡å‹åµŒå…¥ï¼ˆE5-Small + BGE-M3ï¼‰ã€è¯­ä¹‰æœç´¢ã€AI å­¦ä¹ æ•™ç»ƒã€è§†é¢‘è½¬å†™ã€RAG QA
- **é€šçŸ¥ä¸å¢é•¿**ï¼šOneSignal æ¨é€ã€æˆå°±/ç§¯åˆ†ã€å­¦ä¹ ç»Ÿè®¡

> æ¥å£è®¿é—®æ§åˆ¶ï¼šåç«¯ API é€šè¿‡ `utils/auth/server-guard.ts` çš„ `authorize('student'|'tutor'|'admin')` è¿›è¡Œé‰´æƒï¼Œå¹¶åœ¨æ•°æ®åº“å±‚åšæ‰€æœ‰æƒæ ¡éªŒï¼ˆRLSï¼‰ã€‚

## åŠŸèƒ½äº®ç‚¹

- **AI éšçœ‹éšé—® + æœ¯è¯­å¡ç‰‡**
  - æ’­æ”¾å™¨æ—¶é—´æ„ŸçŸ¥é—®ç­”ï¼ˆÂ±30 ç§’çª—å£ï¼‰ã€æ™ºèƒ½æœ¯è¯­è¯†åˆ«ä¸è·³è½¬
  - æ¥å£ä¸ç»„ä»¶ï¼š`app/api/video/qa`ã€`components/ai-coach/*`ã€`components/ai/*`
- **ä¸°å¯Œçš„è§†é¢‘äº’åŠ¨**
  - è§‚çœ‹è®¡æ•°ã€ç‚¹èµ/å–æ¶ˆèµã€å¼¹å¹•ï¼ˆé™æµ/å®¡æ ¸ï¼‰ã€çº¿ç¨‹åŒ–è¯„è®ºä¸è¯„è®ºç‚¹èµ
  - æ¥å£ï¼š`/api/video/views`ã€`/api/video/likes`ã€`/api/video/danmaku`ã€`/api/video/comments`ã€`/api/video/comments/[id]/likes`
  - æ’­æ”¾å™¨ï¼š`components/video/bilibili-video-player.tsx`
- **è¯­ä¹‰æœç´¢ä¸åµŒå…¥ç³»ç»Ÿ**
  - åŒæ¨¡å‹ï¼ˆE5-Small 384ç»´ + BGE-M3 1024ç»´ï¼‰æ··åˆæ£€ç´¢ã€åå°é˜Ÿåˆ—ã€æ‰¹å¤„ç†ä¸é‡è¯•
  - å…³é”®æ–‡ä»¶ï¼š`db/migrations/20250905_embedding_system.sql`ã€`lib/langChain/embedding.ts`ã€`lib/langChain/vectorstore.ts`ã€`app/api/embeddings/*`
- **å¯é çš„åå°å¤„ç†**
  - åŸºäº QStash çš„ Whisper è½¬å†™æµæ°´çº¿ï¼Œè‡ªåŠ¨é¢„çƒ­ä¸æŒ‡æ•°å›é€€é‡è¯•
  - è½¬å†™æ­¥éª¤ï¼š`app/api/video-processing/steps/transcribe/route.ts`
- **çœŸå®ç»“ç®—çš„æ”¯ä»˜ä½“ç³»**
  - Stripe Checkout + Connectï¼Œ90/10 åˆ†æˆï¼Œæ”¯æŒå®šæ—¶é‡Šæ”¾ä¸å¤±è´¥é‡è¯•
  - æ¥å£ï¼š`/api/course/webhook`ã€`/api/tutor/stripe-connect`ã€`/api/tutor/earnings`ã€`/api/tutor/earnings/release`
- **é€šçŸ¥ä¸å¢é•¿**
  - OneSignal Web Push + æ•°æ®åº“å­˜å‚¨ã€æœªè¯»è®¡æ•°ã€ç”¨æˆ·åå¥½è®¾ç½®
  - Workerï¼š`public/OneSignalSDKWorker.js`ï¼›å‰ç«¯åœ¨ `components/`ã€`hooks/` ä¸‹é›†æˆ
- **å›½é™…åŒ–ä¸ä½“éªŒ**
  - `next-intl` å¤šè¯­è¨€ã€ç»ç’ƒæ‹Ÿæ€ UIã€æ·±æµ…è‰²æ¨¡å¼ã€å¯è®¿é—®æ€§
- **Admin ä¸æƒé™**
  - ç®¡ç†åå°ä¸ç»Ÿè®¡ï¼š`app/api/admin/*`ã€`components/admin/*`ã€`hooks/admin/*`

## æ€§èƒ½ä¸å®‰å…¨

- **å®‰å…¨**ï¼šå…³é”®è¡¨å¯ç”¨ RLSï¼ŒAPI å±‚ `authorize(...)`ï¼Œæ‰€æœ‰æƒæ ¡éªŒä¸å®¡è®¡æ—¥å¿—
- **å¯é **ï¼šReact Query ç¼“å­˜ã€Redis ç¼“å­˜ã€é¢„çƒ­ + é‡è¯•ã€å¼¹å¹•é™æµã€æ•°æ®åº“ç´¢å¼•ä¸è§¦å‘å™¨
- **å¯æ‰©å±•**ï¼šåµŒå…¥ä¸è½¬å†™åå°å¤„ç†ã€åˆ†é¡µ APIã€æ··åˆå‘é‡æœç´¢

## PWA ä¸ Capacitor

- **PWA å±‚ï¼ˆSerwist + Manifestï¼‰**
  - Service Workerï¼šåœ¨ `app/sw.ts` å®šä¹‰ï¼Œé€šè¿‡ `@serwist/next`ï¼ˆè§ `next.config.ts`ï¼‰æ‰“åŒ…åˆ° `public/sw.js`ã€‚å¼€å‘ç¯å¢ƒé»˜è®¤ç¦ç”¨ï¼Œç”Ÿäº§ç¯å¢ƒå¯ç”¨ã€‚
  - Manifestï¼š`public/manifest.json` å®šä¹‰åç§°ã€å›¾æ ‡ã€`start_url`ã€`display: 'standalone'` ç­‰ã€‚å¯æŒ‰éœ€æ›¿æ¢å›¾æ ‡å°ºå¯¸ä¸å“ç‰Œè‰²ã€‚
  - OneSignal Workerï¼š`public/OneSignalSDKWorker.js` å·²åœ¨ `next.config.ts` ä¸­é€šè¿‡ `exclude` æ’é™¤ï¼Œä¸è¢« Serwist æ¥ç®¡ï¼Œå¹¶è®¾ç½®äº†æ­£ç¡®çš„ Header ä»¥ä¿è¯æ³¨å†ŒæˆåŠŸã€‚
  - éªŒè¯ï¼šæœ¬åœ°æ‰“åŒ…ååœ¨ Chrome DevTools â†’ Application â†’ Service Workers æŸ¥çœ‹æ˜¯å¦æ³¨å†ŒæˆåŠŸã€‚
    ```bash
    npm run build && npm start
    ```

- **Capacitor ç§»åŠ¨å¤–å£³**
  - é…ç½®ï¼š`capacitor.config.ts`
    ```ts
    const config: CapacitorConfig = {
      appId: "com.studify.platform.vercel.app",
      appName: "Studify",
      webDir: "empty", // ä½¿ç”¨è¿œç¨‹æœåŠ¡å™¨
      server: { url: "https://studify-platform.vercel.app", cleartext: true },
    };
    ```
  - å¼€å‘ï¼ˆAndroid/iOSï¼‰ï¼šå°† `server.url` æŒ‡å‘ä½ çš„æœ¬åœ°å¼€å‘æœåŠ¡
    - Android æ¨¡æ‹Ÿå™¨ï¼š`http://10.0.2.2:3000`
    - çœŸæœºï¼ˆåŒå±€åŸŸç½‘ï¼‰ï¼š`http://<LAN-IP>:3000`
    - æ­¥éª¤ï¼š
      ```bash
      # 1) å¯åŠ¨ Next.js
      npm run dev

      # 2) åŒæ­¥åŸç”Ÿé¡¹ç›®
      npx cap sync android   # æˆ–: npx cap sync ios

      # 3) è¿è¡Œåº”ç”¨
      npx cap run android    # æˆ–ä½¿ç”¨ Android Studio: npx cap open android
      ```
    - æ³¨æ„ï¼š`cleartext: true` ä¾¿äºæœ¬åœ°ä½¿ç”¨ http è°ƒè¯•ï¼›ç”Ÿäº§è¯·ä½¿ç”¨ httpsã€‚
  - ç”Ÿäº§å‘å¸ƒï¼š
    - å…ˆéƒ¨ç½² Webï¼ˆä¾‹å¦‚ Vercelï¼‰ï¼Œå°† `server.url` æŒ‡å‘æ­£å¼ https åŸŸåï¼ˆä»“åº“å·²ç¤ºä¾‹è®¾ç½®ï¼‰ã€‚
    - ç„¶åæ‰“åŒ…ï¼š
      ```bash
      npx cap sync android && npx cap open android   # åœ¨ Android Studio æ„å»º/ç­¾å
      npx cap sync ios && npx cap open ios           # åœ¨ Xcode å½’æ¡£/ç­¾å
      ```
    - å¯é€‰ï¼ˆé«˜çº§ï¼‰ï¼šè‹¥åº”ç”¨å®Œå…¨é™æ€ï¼Œå¯å°† `webDir` æŒ‡å‘é™æ€å¯¼å‡ºç›®å½•ï¼ˆå¦‚ `out`ï¼‰ã€‚ä½† SSR/App Router åœºæ™¯å»ºè®®ä¿ç•™ `server.url` è¿œç¨‹åŠ è½½æ¨¡å¼ã€‚
  - æ¨é€é€šçŸ¥ï¼ˆç§»åŠ¨ç«¯ï¼‰ï¼š
    - Web Push ä»ä½¿ç”¨ `public/OneSignalSDKWorker.js`ã€‚
    - è‹¥åˆ‡æ¢åˆ°åŸç”Ÿæ¨é€ï¼Œå¯é›†æˆç›¸åº” Capacitor æ’ä»¶å¹¶å®Œæˆå¹³å°é…ç½®ï¼›å½“å‰ä»“åº“ä»¥ Web Pushï¼ˆOneSignalï¼‰ä¸ºä¸»ï¼Œä¸” `next.config.ts` å·²ä¸ºå…¶è®¾ç½®äº† SW Headersã€‚


